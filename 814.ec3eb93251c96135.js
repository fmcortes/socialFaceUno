"use strict";(self.webpackChunksocial_face=self.webpackChunksocial_face||[]).push([[814],{4814:(nt,P,o)=>{o.r(P),o.d(P,{ProfileModule:()=>et});var m={};o.r(m),o.d(m,{getUserProfileEffect:()=>tt});var f=o(6895),g=o(2127),Z=o(9841),t=o(4650),h=o(7178),_=o(6271),a=o(2997);const p=(0,a.R7)({source:"User Profile",events:{"Get user profile":(0,a.Ky)(),"Get user profile success":(0,a.Ky)(),"Get user profile failure":(0,a.Ky)()}});var w=o(6943);const C={isLoading:!1,error:null,data:null},O=(0,a.Tz)({name:"userProfile",reducer:(0,a.Lq)(C,(0,a.on)(p.getUserProfile,e=>({...e,isLoading:!0})),(0,a.on)(p.getUserProfileSuccess,(e,s)=>({...e,isLoading:!1,data:s.userProfile})),(0,a.on)(p.getUserProfileFailure,(e,s)=>({...e,isLoading:!1,error:s.errors})),(0,a.on)(w.hn,()=>C))}),{selectData:U}=O;let M=(()=>{class e{constructor(n){this.store=n}get userProfile$(){return this.store.select(U)}fetchUserProfile(n){this.store.dispatch(p.getUserProfile({id:n}))}static#t=this.\u0275fac=function(i){return new(i||e)(t.LFG(a.yh))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var T=o(434),c=o(433),F=o(5003);function I(e,s){if(1&e&&t._UZ(0,"app-profile-picture",7),2&e){const n=t.oxw();t.Q6J("userProfile",n.profileUser)}}let A=(()=>{class e{constructor(n,i,r){this.authFacade=n,this.formBuilder=i,this.postFacade=r,this.profileUser=null,this.form=this.formBuilder.nonNullable.group({title:["",c.kI.required],body:["",c.kI.required]}),this.authFacade.currentUser$.subscribe(l=>{l&&(this.profileUser={id:l.id,username:`${l.firstname} ${l.lastname}`,image:l.image||""})})}onSubmit(){const n={...this.form.getRawValue(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),description:this.form.getRawValue().title,author:{...this.profileUser},favorited:!1,image:"",tagList:[],slug:this.form.getRawValue().title,favoritesCount:0,userId:this.profileUser?.id};console.warn("request",n),this.postFacade.createPost(n)}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(_.j),t.Y36(c.qu),t.Y36(h.T))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-post-writer"]],decls:8,vars:2,consts:[[1,"write-post-container"],[3,"userProfile",4,"ngIf"],[1,"post-input-container"],[3,"formGroup","ngSubmit"],["type","text","placeholder","Title","id","title","formControlName","title"],["name","body","id","body","formControlName","body","rows","3","placeholder","What's on your mind, Jhon"],["type","submit",1,"button","button-small"],[3,"userProfile"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0),t.YNc(1,I,1,1,"app-profile-picture",1),t.TgZ(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t._UZ(4,"input",4)(5,"textarea",5),t.TgZ(6,"button",6),t._uU(7,"Post"),t.qZA()()()()),2&i&&(t.xp6(1),t.Q6J("ngIf",r.profileUser),t.xp6(2),t.Q6J("formGroup",r.form))},dependencies:[f.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,F.q],styles:[".write-post-container[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:6px;padding:20px;color:#626262}.post-input-container[_ngcontent-%COMP%]{padding-left:55px;padding-top:20px;display:flex;flex-direction:column;gap:1rem}@media screen and (max-width: 768px){.post-input-container[_ngcontent-%COMP%]{padding-left:0}}.post-input-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%;border:0;outline:0;border-bottom:1px solid #ccc;background:transparent;resize:none}"]})}return e})();function J(e,s){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"img",4),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("src",n,t.LSH)}}let L=(()=>{class e{constructor(){this.pictures=[]}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile-photo-box"]],inputs:{pictures:"pictures"},decls:7,vars:1,consts:[[1,"photo-box-title"],["href","",1,"photo-box-title-link"],[1,"photo-box"],[4,"ngFor","ngForOf"],["alt","user pictture",3,"src"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Photos"),t.qZA(),t.TgZ(3,"a",1),t._uU(4,"All Photos"),t.qZA()(),t.TgZ(5,"div",2),t.YNc(6,J,2,1,"div",3),t.qZA()),2&i&&(t.xp6(6),t.Q6J("ngForOf",r.pictures))},dependencies:[f.sg],styles:[".photo-box[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,auto);grid-gap:10px;margin-top:15px}.photo-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:pointer}.photo-box-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.photo-box-title-link[_ngcontent-%COMP%]{text-decoration:none;color:#1876f2;font-size:.75rem}"]})}return e})();const Q=function(e){return["/home/profile",e]},Y=function(e){return{userId:e}};function N(e,s){if(1&e&&(t.TgZ(0,"li")(1,"div",4),t._UZ(2,"img",5),t.TgZ(3,"a",6),t._uU(4),t.qZA()()()),2&e){const n=s.$implicit;t.xp6(2),t.Q6J("src",n.image,t.LSH)("alt","photography of"+n.firstname),t.xp6(1),t.Q6J("routerLink",t.VKq(6,Q,n.firstname))("queryParams",t.VKq(8,Y,n.id)),t.xp6(1),t.AsE("",n.firstname," ",n.lastname," ")}}let S=(()=>{class e{constructor(){this.friends=[]}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile-friend-list"]],inputs:{friends:"friends"},decls:7,vars:2,consts:[[1,"friend-list-title-box"],["href","",1,"friend-list-title-box-link"],[1,"friend-list-box"],[4,"ngFor","ngForOf"],[1,"friend-list-image-container"],[3,"src","alt"],[1,"blue-link",3,"routerLink","queryParams"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"a",1),t._uU(4,"All Friends"),t.qZA()(),t.TgZ(5,"ul",2),t.YNc(6,N,5,10,"li",3),t.qZA()),2&i&&(t.xp6(2),t.hij("Friends ",r.friends.length,""),t.xp6(4),t.Q6J("ngForOf",r.friends))},dependencies:[f.sg,g.rH],styles:[".friend-list-title-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media screen and (max-width: 768px){.friend-list-title-box[_ngcontent-%COMP%]{flex-direction:column}}.friend-list-title-box-link[_ngcontent-%COMP%]{text-decoration:none;color:#1876f2;font-size:.75rem}.friend-list-box[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,auto);grid-gap:15px;margin-top:15px;margin-bottom:15px;list-style:none}@media screen and (max-width: 768px){.friend-list-box[_ngcontent-%COMP%]{grid-gap:10px}}.friend-list-image-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;width:100px;height:100px}.friend-list-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;cursor:pointer}"]})}return e})();function z(e,s){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.hij(" Friends: ",n.friends.length," ")}}function B(e,s){if(1&e&&(t.TgZ(0,"div",14)(1,"div",15)(2,"div",16),t._UZ(3,"img",17),t.TgZ(4,"div")(5,"h3"),t._uU(6),t.qZA(),t.YNc(7,z,2,1,"p",0),t.qZA()()()()),2&e){const n=s.ngIf;t.xp6(3),t.Q6J("src",n.image,t.LSH),t.xp6(3),t.AsE("",n.firstname," ",n.lastname,""),t.xp6(1),t.Q6J("ngIf",n.friends)}}const y=function(){return[]};function j(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"app-profile-friend-list",18),t.BQk()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("friends",(null==n.userProfile?null:n.userProfile.friends)||t.DdM(1,y))}}function E(e,s){1&e&&t._UZ(0,"app-post-writer")}function q(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-post-list",19),t.NdJ("currentPageEvent",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.onCurrentPage())}),t.qZA(),t.BQk()}if(2&e){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("postList",n.posts)}}function $(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div",3),t._UZ(2,"img",4),t.YNc(3,B,8,4,"div",5),t.TgZ(4,"div",6)(5,"div",7)(6,"div",8)(7,"h3"),t._uU(8,"Intro"),t.qZA(),t.TgZ(9,"p",9),t._uU(10," Believe in yoursel and you can do unbeliable things. "),t._UZ(11,"img",10),t.qZA(),t._UZ(12,"hr"),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"app-profile-photo-box",11),t.qZA(),t.TgZ(15,"div",8),t.YNc(16,j,2,2,"ng-container",12),t.qZA()(),t.TgZ(17,"div",13),t.YNc(18,E,1,0,"app-post-writer",0),t.YNc(19,q,2,1,"ng-container",12),t.qZA()()(),t.BQk()),2&e){const n=s.ngIf;t.oxw();const i=t.MAs(3),r=t.MAs(5);t.xp6(2),t.Q6J("src",null==n.userProfile?null:n.userProfile.cover,t.LSH)("alt","profile picture of"+(null==n.userProfile?null:n.userProfile.firstname)+(null==n.userProfile?null:n.userProfile.lastname)),t.xp6(1),t.Q6J("ngIf",n.userProfile),t.xp6(11),t.Q6J("pictures",(null==n.userProfile?null:n.userProfile.photos)||t.DdM(9,y)),t.xp6(2),t.Q6J("ngIf",null==n.userProfile?null:n.userProfile.friends)("ngIfElse",i),t.xp6(2),t.Q6J("ngIf",(null==n.currentUser?null:n.currentUser.id)===(null==n.userProfile?null:n.userProfile.id)),t.xp6(1),t.Q6J("ngIf",n.posts&&n.posts.length>0)("ngIfElse",r)}}function D(e,s){1&e&&(t.TgZ(0,"h3"),t._uU(1,"Friends"),t.qZA(),t.TgZ(2,"p"),t._uU(3,"No Friends to display"),t.qZA())}function G(e,s){1&e&&(t.TgZ(0,"div",8)(1,"p"),t._uU(2,"There is no posts to display"),t.qZA()())}const K=[{path:"",component:(()=>{class e{constructor(n,i,r,l){this.postFacade=n,this.authFacade=i,this.route=r,this.profileFacade=l,this.currentPage=0,this.userId=null,this.data$=(0,Z.a)({posts:this.postFacade.posts$,currentUser:this.authFacade.currentUser$,userProfile:this.profileFacade.userProfile$})}ngOnInit(){this.route.queryParams.subscribe(n=>{this.userId=n.userId,this.currentPage=0,this.userId&&(this.fetchUserProfile(this.userId),this.getPostData(this.userId,this.currentPage))})}fetchUserProfile(n){this.profileFacade.fetchUserProfile(n)}onCurrentPage(){this.userId&&(this.currentPage++,this.getPostData(this.userId,this.currentPage))}getPostData(n,i){this.postFacade.fetchPostsByUserId(i,n)}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(h.T),t.Y36(_.j),t.Y36(g.gz),t.Y36(M))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:6,vars:3,consts:[[4,"ngIf"],["emptyFriends",""],["emptyPosts",""],[1,"profile-container"],[1,"cover-img",3,"src","alt"],["class","profile-details",4,"ngIf"],[1,"profile-info"],[1,"info-col"],[1,"profile-intro"],[1,"intro-text"],["src","assets/images/feeling.png","alt",""],[3,"pictures"],[4,"ngIf","ngIfElse"],[1,"post-col"],[1,"profile-details"],[1,"pd-left"],[1,"pd-row"],["alt","",1,"pd-image",3,"src"],[3,"friends"],[3,"postList","currentPageEvent"]],template:function(i,r){1&i&&(t.YNc(0,$,20,10,"ng-container",0),t.ALo(1,"async"),t.YNc(2,D,4,0,"ng-template",null,1,t.W1O),t.YNc(4,G,3,0,"ng-template",null,2,t.W1O)),2&i&&t.Q6J("ngIf",t.lcZ(1,1,r.data$))},dependencies:[f.O5,T.c,A,L,S,f.Ov],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 15%;color:#626262}@media screen and (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:20px 5%}}.cover-img[_ngcontent-%COMP%]{width:100%;height:640px;border-radius:6px;margin-bottom:14px}@media screen and (max-width: 768px){.cover-img[_ngcontent-%COMP%]{height:320px}}.profile-details[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:4px;display:flex;align-items:flex-start;justify-content:space-between}@media screen and (max-width: 768px){.profile-details[_ngcontent-%COMP%]{flex-wrap:wrap}}.pd-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.pd-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}@media screen and (max-width: 768px){.pd-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}.pd-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}.pd-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%;margin-top:12px}.pd-image[_ngcontent-%COMP%]{width:100px;margin-right:20px;border-radius:6px}.pd-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#1876f2;border:0;outline:0;padding:6px 10px;display:inline-flex;align-items:center;color:#fff;border-radius:3px;margin-left:10px;cursor:pointer}@media screen and (max-width: 768px){.pd-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:0;margin-right:10px}}.pd-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15px;margin-right:10px}.pd-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background:#e4e6eb;color:#000}.pd-right[_ngcontent-%COMP%]{text-align:right}@media screen and (max-width: 768px){.pd-right[_ngcontent-%COMP%]{text-align:left;margin-top:15px}}.pd-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#e4e6eb;border-radius:3px;padding:12px;display:inline-flex;margin-top:30px}.pd-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.profile-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-top:20px}@media screen and (max-width: 768px){.profile-info[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;flex-direction:column}}.info-col[_ngcontent-%COMP%]{flex-basis:33%}@media screen and (max-width: 768px){.info-col[_ngcontent-%COMP%]{flex-basis:100%}}.post-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;flex-basis:65%}@media screen and (max-width: 768px){.post-col[_ngcontent-%COMP%]{flex-basis:100%}}.profile-intro[_ngcontent-%COMP%]{background:#fff;padding:20px;margin-bottom:20px;border-radius:4px}@media screen and (max-width: 768px){.profile-intro[_ngcontent-%COMP%]{padding:.5rem}}.profile-intro[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600}.intro-text[_ngcontent-%COMP%]{text-align:center;margin:10px 0;font-size:15px}.intro-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;margin-bottom:-3px}.profile-intro[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:0;height:1px;background:#cccccc;margin:24px 0}.profile-intro[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;font-size:1rem;margin:15px 0;display:flex;align-items:center}.profile-intro[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;margin-right:10px}.title-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.title-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1876f2;font-size:.75rem}.profile-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}"]})}return e})()}];let W=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(K),g.Bz]})}return e})();var R=o(4466),v=o(4004),k=o(529);let b=(()=>{class e{constructor(n){this.httpClient=n}getUserProfileById(n){return this.httpClient.get(`https://fakefaceapi.onrender.com/users?id=${n}`).pipe((0,v.U)(r=>r[0]))}static#t=this.\u0275fac=function(i){return new(i||e)(t.LFG(k.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var d=o(2655),H=o(3900),V=o(262),X=o(9646),u=o(7601);const x=(e,s)=>Math.floor(Math.random()*(s-e))+e,tt=(0,d.GW)((e=(0,t.f3M)(d.eX),s=(0,t.f3M)(b))=>e.pipe((0,d.l4)(p.getUserProfile),(0,H.w)(({id:n})=>s.getUserProfileById(n).pipe((0,v.U)(i=>(i.photos=[...u.C_],i.cover=u.e3[x(0,7)],i.friends?.forEach(r=>{r.image||(r.image=u.hv[x(0,10)])}),i.image||(i.image=u.hv[x(0,10)]),p.getUserProfileSuccess({userProfile:i}))),(0,V.K)(i=>(0,X.of)(p.getUserProfileFailure({errors:i.error})))))),{functional:!0});let et=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[h.T,M,b],imports:[f.ez,W,R.m,a.Aw.forFeature(O),d.sQ.forFeature([m])]})}return e})()}}]);