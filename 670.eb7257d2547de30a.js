"use strict";(self.webpackChunksocial_face=self.webpackChunksocial_face||[]).push([[670],{4670:(k,M,r)=>{r.r(M),r.d(M,{HomeModule:()=>b});var v={};r.r(v),r.d(v,{createPostEffect:()=>W,getAllPostByUserIdEffect:()=>Y,getPostByTagdEffect:()=>D,getPostByUserIdEffect:()=>X,getPostEffect:()=>Q});var y={};r.r(y),r.d(y,{getPopularTagsEffect:()=>V});var P=r(6895),T=r(2127),B=r(9841),t=r(4650),x=r(7178),O=r(6271),g=r(2997);const u=(0,g.R7)({source:"tags",events:{"Get  tags":(0,g.uZ)(),"Get  tags success":(0,g.Ky)(),"Get  tags failure":(0,g.Ky)()}}),U=(0,g.Tz)({name:"tags",reducer:(0,g.Lq)({isLoading:!1,error:null,data:null},(0,g.on)(u.getTags,e=>({...e,isLoading:!0})),(0,g.on)(u.getTagsSuccess,(e,a)=>({...e,isLoading:!1,data:a.tags})),(0,g.on)(u.getTagsFailure,(e,a)=>({...e,isLoading:!1,error:a.error})))}),{selectData:I}=U;let C=(()=>{class e{constructor(s){this.store=s}get tags$(){return this.store.select(I)}fetchTags(){this.store.dispatch(u.getTags())}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(g.yh))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var Z=r(5003),E=r(5229),G=r(9246);const S=function(e){return["/home/posts",e]};function H(e,a){if(1&e&&(t.TgZ(0,"a",6),t._uU(1),t.qZA()),2&e){const s=a.$implicit;t.Q6J("routerLink",t.VKq(2,S,s.tag)),t.xp6(1),t.hij("#",s.tag,"")}}const K=function(){return["/home/friends"]};function J(e,a){if(1&e){const s=t.EpF();t.TgZ(0,"div",1)(1,"aside",2)(2,"app-panel")(3,"div",3)(4,"h4"),t._uU(5,"Shorcuts"),t.qZA()(),t.TgZ(6,"div",4),t._UZ(7,"app-profile-picture",5),t.TgZ(8,"a",6),t._UZ(9,"img",7),t._uU(10,"Friends"),t.qZA()()(),t.TgZ(11,"app-panel")(12,"div",3)(13,"h4"),t._uU(14,"Tags"),t.qZA()(),t.TgZ(15,"div",8),t.YNc(16,H,2,4,"a",9),t.qZA()()(),t.TgZ(17,"main",10)(18,"h1",11),t._uU(19,"Global Posts"),t.qZA(),t.TgZ(20,"app-post-list",12),t.NdJ("currentPageEvent",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.getPostData())}),t.qZA()()()}if(2&e){const s=a.ngIf;t.xp6(7),t.Q6J("userProfile",s.currentUser)("showProfileLink",!0),t.xp6(1),t.Q6J("routerLink",t.DdM(6,K)),t.xp6(8),t.Q6J("ngForOf",s.tags),t.xp6(4),t.Q6J("postList",s.posts)("postTitle","Global")}}const $=[{path:"",component:(()=>{class e{constructor(s,n,c){this.postFacade=s,this.authFacade=n,this.tagsFacade=c,this.currentPage=0,this.data$=(0,B.a)({posts:this.postFacade.posts$,currentUser:this.authFacade.currentUser$,tags:this.tagsFacade.tags$})}ngOnInit(){this.tagsFacade.fetchTags(),this.getPostData()}getPostData(){this.currentPage++,this.postFacade.fetchPosts(this.currentPage,!0)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(x.T),t.Y36(O.j),t.Y36(C))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:2,vars:3,consts:[["class","home-container",4,"ngIf"],[1,"home-container"],["role","complementary","aria-label","Shorcuts panel",1,"home-left-sidebar"],[1,"home-side-bar-title"],[1,"home-imp-links"],[3,"userProfile","showProfileLink"],[1,"blue-link",3,"routerLink"],["src","assets/images/friends.png","alt",""],[1,"home-tag-container"],["class","blue-link",3,"routerLink",4,"ngFor","ngForOf"],["id","main",1,"home-main-content"],[1,"home-title"],[3,"postList","postTitle","currentPageEvent"]],template:function(n,c){1&n&&(t.YNc(0,J,21,7,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,c.data$))},dependencies:[P.sg,P.O5,T.rH,Z.q,E.c,G.y,P.Ov],styles:[".home-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:13px 5%}@media screen and (max-width: 768px){.home-container[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}.home-tag-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.home-tag-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1rem}.home-left-sidebar[_ngcontent-%COMP%]{flex-basis:25%;position:sticky;display:flex;flex-direction:column;gap:.5rem;top:70px}@media screen and (max-width: 768px){.home-left-sidebar[_ngcontent-%COMP%]{flex-basis:100%;position:unset}}.home-main-content[_ngcontent-%COMP%]{flex-basis:72%}@media screen and (max-width: 768px){.home-main-content[_ngcontent-%COMP%]{flex-basis:100%}}.home-imp-links[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.home-imp-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;margin-right:15px}.home-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#0a0a0a}"]})}return e})()}];let j=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[T.Bz.forChild($),T.Bz]})}return e})();var z=r(4466),o=r(2655),f=r(4051),p=r(3900),d=r(4004),m=r(262),h=r(9646),i=r(2954);const Q=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(f.L))=>e.pipe((0,o.l4)(i.r.getPosts),(0,p.w)(({request:s})=>{const{author:n,global:c,page:l}=s;return a.getPosts(l,c,n).pipe((0,d.U)(F=>i.r.getPostsSuccess({posts:F})),(0,m.K)(F=>(0,h.of)(i.r.getPostsFailure({errors:F.error}))))})),{functional:!0}),X=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(f.L))=>e.pipe((0,o.l4)(i.r.getPostsByUserId),(0,p.w)(({request:s})=>{const{userId:n,page:c}=s;return a.getPostByUserId(c,n).pipe((0,d.U)(l=>i.r.getPostsByUserIdSuccess({posts:l,currentPage:c})),(0,m.K)(l=>(0,h.of)(i.r.getPostsByUserIdFailure({errors:l.error}))))})),{functional:!0}),Y=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(f.L))=>e.pipe((0,o.l4)(i.r.getAllPostsByUserId),(0,p.w)(({request:s})=>{const{userId:n}=s;return a.getAllPostByUserId(n).pipe((0,d.U)(c=>i.r.getAllPostsByUserIdSuccess({posts:c})),(0,m.K)(c=>(0,h.of)(i.r.getAllPostsByUserIdFailure({errors:c.error}))))})),{functional:!0}),D=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(f.L))=>e.pipe((0,o.l4)(i.r.getPostsByTag),(0,p.w)(({request:s})=>{const{tag:n,page:c}=s;return a.getPostByTag(c,n).pipe((0,d.U)(l=>i.r.getPostsByTagSuccess({posts:l})),(0,m.K)(l=>(0,h.of)(i.r.getPostsByTagFailure({errors:l.error}))))})),{functional:!0}),W=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(f.L))=>e.pipe((0,o.l4)(i.r.createPosts),(0,p.w)(({request:s})=>a.createPost(s).pipe((0,d.U)(n=>i.r.createPostsSuccess({post:n})),(0,m.K)(n=>(0,h.of)(i.r.createPostsFailure({errors:n.error})))))),{functional:!0});var N=r(2340),R=r(529);let L=(()=>{class e{constructor(s){this.httpClient=s,this.url=N.N.apiUrl}getTags(){return this.httpClient.get(`${this.url}/tagList`)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(R.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();const V=(0,o.GW)((e=(0,t.f3M)(o.eX),a=(0,t.f3M)(L))=>e.pipe((0,o.l4)(u.getTags),(0,p.w)(()=>a.getTags().pipe((0,d.U)(s=>u.getTagsSuccess({tags:s})),(0,m.K)(s=>(0,h.of)(u.getTagsFailure(s.error)))))),{functional:!0});var w=r(1400);let b=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({providers:[f.L,L,x.T,C],imports:[P.ez,j,z.m,g.Aw.forFeature(w.C3),g.Aw.forFeature(U),o.sQ.forFeature([v,y])]})}return e})()}}]);